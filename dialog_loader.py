"""
–°–æ–∑–¥–∞–Ω–∏–µ –ö–ê–ß–ï–°–¢–í–ï–ù–ù–´–• –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤ —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç—å—é
50-100 –ø—Ä–∏–º–µ—Ä–æ–≤ —Å —ç–º–ø–∞—Ç–∏–µ–π
"""

import argparse
import json
from pathlib import Path
import random
import re
from datetime import datetime

def get_dialogues_path(output_dir: str = None) -> Path:
    """–ù–∞—Ö–æ–¥–∏—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç—å –∫ –¥–∏–∞–ª–æ–≥–∞–º —Ä—è–¥–æ–º —Å output_dir"""
    # 1. –ï—Å–ª–∏ —É–∫–∞–∑–∞–Ω output_dir, –∏—â–µ–º —Ä—è–¥–æ–º
    if output_dir:
        base_path = Path(output_dir).parent  # –ü–æ–¥–Ω–∏–º–∞–µ–º—Å—è –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ
        possible_paths = [
            base_path / "dialogues.json",
            base_path / "data" / "dialogues.json",
            base_path / "quality_psych_dialogues_enhanced.json",
            base_path / "processed_epitome" / "quality_psych_dialogues_enhanced.json",
        ]
        
        for path in possible_paths:
            if path.exists():
                return path
    
    # 2. –ò—â–µ–º –≤ —Ç–∏–ø–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
    project_paths = [
        Path(__file__).parent.parent / "quality_psych_dialogues_enhanced.json",
        Path(__file__).parent / "quality_psych_dialogues_enhanced.json",
        Path("C:/Files/processed_epitome/quality_psych_dialogues_enhanced.json"),
        Path("D:/Files/processed_epitome/quality_psych_dialogues_enhanced.json"),
    ]
    
    for path in project_paths:
        if path.exists():
            return path
    
    # 3. –ï—Å–ª–∏ –Ω–µ –Ω–∞—à–ª–∏, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø—É—Ç—å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
    default_path = Path(__file__).parent / "dialogues.json"
    return default_path

# –í main() –∑–∞–º–µ–Ω—è–µ–º —Ö–∞—Ä–¥–∫–æ–¥ –ø—É—Ç–∏:
def main():
   parser = argparse.ArgumentParser(description='–°–æ–∑–¥–∞–Ω–∏–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –¥–∏–∞–ª–æ–≥–æ–≤')
   parser.add_argument('num_dialogues', type=int, nargs='?', default=10000,
                      help='–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10000)')
   parser.add_argument('--output', type=str, 
                      help='–ü–∞–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–¥–∏–∞–ª–æ–≥–∏ –±—É–¥—É—Ç –≤ output/data/dialogues.json)')
   
   args = parser.parse_args()
   
   # –û–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—É—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
   if args.output:
       output_dir = Path(args.output)
   else:
       # –î–µ—Ñ–æ–ª—Ç–Ω—ã–π –ø—É—Ç—å —Ä—è–¥–æ–º —Å –ª–∞—É–Ω—á–µ—Ä–æ–º
       output_dir = Path(__file__).parent / "experiments" / "default"
   
   # –°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É data –≤–Ω—É—Ç—Ä–∏
   data_dir = output_dir / "data"
   data_dir.mkdir(parents=True, exist_ok=True)
   
   output_file = data_dir / "dialogues.json"
   
   print("=" * 60)
   print(f"üé≠ –°–û–ó–î–ê–ù–ò–ï {args.num_dialogues} –ü–°–ò–•–û–õ–û–ì–ò–ß–ï–°–ö–ò–• –î–ò–ê–õ–û–ì–û–í")
   print("=" * 60)
   print(f"üìç –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤: {output_file}")
   print("=" * 60)

# ================= –£–õ–£–ß–®–ï–ù–ù–´–ï –î–ê–ù–ù–´–ï =================

# –ë–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∏–µ —Ç–µ–º—ã —Å –ø–æ–¥—Ç–µ–º–∞–º–∏
deep_topics = {
    "—Ç—Ä–µ–≤–æ–≥–∞ –∏ –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ": ["–ø–∞–Ω–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏", "—Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞", "–∏–ø–æ—Ö–æ–Ω–¥—Ä–∏—è", "–≥–µ–Ω–µ—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞"],
    "–¥–µ–ø—Ä–µ—Å—Å–∏—è –∏ –∞–ø–∞—Ç–∏—è": ["–∞–Ω–≥–µ–¥–æ–Ω–∏—è", "—É—Ç—Ä–µ–Ω–Ω—è—è —Ç–æ—Å–∫–∞", "—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –æ–Ω–µ–º–µ–Ω–∏–µ", "—á—É–≤—Å—Ç–≤–æ –±–µ–∑–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏"],
    "–æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ –∏ –∏–∑–æ–ª—è—Ü–∏—è": ["—ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ", "—Å–æ—Ü–∏–∞–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è", "—á—É–≤—Å—Ç–≤–æ –Ω–µ–ø—Ä–∏–Ω—è—Ç–∏—è", "–ø–æ—Ç–µ—Ä—è —Å–≤—è–∑–∏"],
    "—Å–∞–º–æ–æ—Ü–µ–Ω–∫–∞ –∏ –Ω–µ—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å": ["—Å–∏–Ω–¥—Ä–æ–º —Å–∞–º–æ–∑–≤–∞–Ω—Ü–∞", "–ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º", "–∫—Ä–∏—Ç–∏–∫—É—é—â–∏–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –≥–æ–ª–æ—Å", "—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏–º–∏"],
    "–æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã": ["—Å–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å", "–≥—Ä–∞–Ω–∏—Ü—ã –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö", "—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–∞—á–µ–ª–∏", "—Å—Ç—Ä–∞—Ö –±–ª–∏–∑–æ—Å—Ç–∏"],
    "—Ä–∞–±–æ—Ç–∞ –∏ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ": ["—ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ", "–ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤—ã–≥–æ—Ä–∞–Ω–∏–µ", "—Ç—Ä—É–¥–æ–≥–æ–ª–∏–∑–º", "–ø–æ—Ç–µ—Ä—è —Å–º—ã—Å–ª–∞ –≤ —Ä–∞–±–æ—Ç–µ"],
    "—Å—Ç—Ä–∞—Ö–∏ –∏ —Ñ–æ–±–∏–∏": ["–∞–≥–æ—Ä–∞—Ñ–æ–±–∏—è", "—Å–æ—Ü–∏–æ—Ñ–æ–±–∏—è", "–∏–ø–æ—Ö–æ–Ω–¥—Ä–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞—Ö–∏", "—Å—Ç—Ä–∞—Ö –±—É–¥—É—â–µ–≥–æ"],
    "–≥–æ—Ä–µ –∏ —É—Ç—Ä–∞—Ç–∞": ["–Ω–µ–ø—Ä–æ–∂–∏—Ç–æ–µ –≥–æ—Ä–µ", "–∞–Ω—Ç–∏—Ü–∏–ø–∞—Ç–æ—Ä–Ω–æ–µ –≥–æ—Ä–µ", "—Å–ª–æ–∂–Ω–æ–µ –≥–æ—Ä–µ", "—É—Ç—Ä–∞—Ç–∞ —Å–º—ã—Å–ª–∞"],
    "–ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π": ["–ø–∞—Ä–∞–ª–∏—á –∞–Ω–∞–ª–∏–∑–∞", "—Å—Ç—Ä–∞—Ö –æ—à–∏–±–∫–∏", "–ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è", "–ø–æ—Ç–µ—Ä—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏"],
    "–ª–∏—á–Ω–æ—Å—Ç–Ω—ã–π —Ä–æ—Å—Ç": ["—ç–∫–∑–∏—Å—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –∫—Ä–∏–∑–∏—Å", "–∫—Ä–∏–∑–∏—Å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏", "–ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–π –ø–µ—Ä–∏–æ–¥", "–ø–æ–∏—Å–∫ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è"]
}

# –£—Ä–æ–≤–Ω–∏ —ç–º–ø–∞—Ç–∏–∏
empathy_levels = {
    1: ["–ü–æ–Ω–∏–º–∞—é", "–í–∏–∂—É", "–°–ª—ã—à—É –≤–∞—Å", "–ó–∞–º–µ—á–∞—é"],
    2: ["–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–æ", "–ß—É–≤—Å—Ç–≤—É—é –≤–∞–∂–Ω–æ—Å—Ç—å —ç—Ç–æ–≥–æ", "–î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ç—è–∂–µ–ª–æ", "–û—â—É—â–∞—é –≥–ª—É–±–∏–Ω—É —ç—Ç–æ–≥–æ"],
    3: ["–í—ã –ø—Ä–æ–∂–∏–≤–∞–µ—Ç–µ —ç—Ç–æ —Å –±–æ–ª—å—à–æ–π –≥–ª—É–±–∏–Ω–æ–π", "–≠—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —Å–∞–º—ã—Ö –æ—Å–Ω–æ–≤ –±—ã—Ç–∏—è", 
        "–ß—É–≤—Å—Ç–≤—É–µ—Ç—Å—è –æ–≥—Ä–æ–º–Ω–∞—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ä–∞–±–æ—Ç–∞", "–≠—Ç–æ –ø—Ä–æ–Ω–∏–∫–∞–µ—Ç –≤ —Å–∞–º—ã–µ –≥–ª—É–±–æ–∫–∏–µ —Å–ª–æ–∏"]
}

# –≠–º–ø–∞—Ç–∏–π–Ω—ã–µ —Ñ—Ä–∞–∑—ã –ø—Å–∏—Ö–æ–ª–æ–≥–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ)
empathy_phrases = [
    "–ü–æ–Ω–∏–º–∞—é, –∫–∞–∫ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç—è–∂–µ–ª–æ",
    "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ –¥–µ–ª–∏—Ç–µ—Å—å —ç—Ç–∏–º —Å–æ –º–Ω–æ–π",
    "–ß—É–≤—Å—Ç–≤—É—é –≤–∞–∂–Ω–æ—Å—Ç—å —ç—Ç–æ–≥–æ –¥–ª—è –≤–∞—Å",
    "–≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∑–Ω–∞—á–∏–º–∞—è —Ç–µ–º–∞",
    "–ú–æ–≥—É –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å, –∫–∞–∫–∏–µ —ç—Ç–æ –≤—ã–∑—ã–≤–∞–µ—Ç —á—É–≤—Å—Ç–≤–∞",
    "–ü—Ä–∏–Ω–∏–º–∞—é –≤—Å—ë, —á—Ç–æ –≤—ã —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç–µ",
    "–ù–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —á—É–≤—Å—Ç–≤",
    "–ö–∞–∂–¥–æ–µ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ",
    "–í—ã –Ω–µ –æ–¥–∏–Ω–æ–∫–∏ –≤ —ç—Ç–æ–º",
    "–≠—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å, –∏ –º—ã –¥–≤–∏–≥–∞–µ–º—Å—è –≤ –Ω—ë–º"
]

# –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ)
exploration_questions = [
    "–†–∞—Å—Å–∫–∞–∂–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ –æ–± —ç—Ç–æ–º —á—É–≤—Å—Ç–≤–µ",
    "–ö–æ–≥–¥–∞ –≤—ã –≤–ø–µ—Ä–≤—ã–µ —ç—Ç–æ –∑–∞–º–µ—Ç–∏–ª–∏?",
    "–ß—Ç–æ –æ–±—ã—á–Ω–æ –ø–æ–º–æ–≥–∞–µ—Ç –≤ —Ç–∞–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã?",
    "–ê –±—ã–ª–∏ –ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, –∫–æ–≥–¥–∞ –±—ã–ª–æ –ª–µ–≥—á–µ?",
    "–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç –¥–ª—è –≤–∞—Å –ª–∏—á–Ω–æ?",
    "–ö–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–∞—à—É –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—É—é –∂–∏–∑–Ω—å?",
    "–ß—Ç–æ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ –≤ —Ç–µ–ª–µ, –∫–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?",
    "–ö–∞–∫–∏–µ –º—ã—Å–ª–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –≥–æ–ª–æ–≤—É?",
    "–ß—Ç–æ –±—ã –≤–∞–º —Ö–æ—Ç–µ–ª–æ—Å—å –∏–∑–º–µ–Ω–∏—Ç—å?",
    "–ß—Ç–æ –¥–ª—è –≤–∞—Å –±—ã–ª–æ –±—ã –ø—Ä–∏–∑–Ω–∞–∫–æ–º —É–ª—É—á—à–µ–Ω–∏—è?",
    "–ö–∞–∫ —ç—Ç–æ –æ—â—É—â–∞–µ—Ç—Å—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏?",
    "–ß—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –≤–∞—à–∞ –∏–Ω—Ç—É–∏—Ü–∏—è –ø–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É?",
    "–ö–∞–∫ –±—ã —ç—Ç–æ –æ–ø–∏—Å–∞–ª —Ç–æ—Ç, –∫—Ç–æ –∑–Ω–∞–µ—Ç –≤–∞—Å –ª—É—á—à–µ –≤—Å–µ—Ö?",
    "–ß—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∞—Å –≤ —Ç—Ä—É–¥–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã?",
    "–ö–∞–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã –≤—ã –∑–∞–º–µ—á–∞–µ—Ç–µ –≤ —Å–µ–±–µ?"
]

# –†–µ—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞
speech_patterns = [
    {"type": "–æ–±—Ä—ã–≤—ã", "phrases": ["–≠—Ç...", "–ù–µ –∑–Ω–∞—é...", "–ö–∞–∫ –±—ã —Å–∫–∞–∑–∞—Ç—å...", "–ú-–º...", "–í –æ–±—â–µ–º..."]},
    {"type": "–ø–æ–≤—Ç–æ—Ä—ã", "phrases": ["–Ø... —è –Ω–µ –ø–æ–Ω–∏–º–∞—é", "–≠—Ç–æ... —ç—Ç–æ —Å–ª–æ–∂–Ω–æ", "–ë–æ—é—Å—å... –±–æ—é—Å—å, —á—Ç–æ"]},
    {"type": "–≤–æ–ø—Ä–æ—Å—ã –∫ —Å–µ–±–µ", "phrases": ["–ü–æ—á–µ–º—É —è?", "–ó–∞—á–µ–º —ç—Ç–æ –º–Ω–µ?", "–ß—Ç–æ —Å–æ –º–Ω–æ–π –Ω–µ —Ç–∞–∫?"]},
    {"type": "–º–µ—Ç–∞—Ñ–æ—Ä—ã", "phrases": ["–ö–∞–∫ –±—É–¥—Ç–æ –∫–∞–º–µ–Ω—å –Ω–∞ –¥—É—à–µ", "–°–ª–æ–≤–Ω–æ –≤ —Ç—É–º–∞–Ω–µ", 
                                     "–û—â—É—â–µ–Ω–∏–µ –ø—É—Å—Ç–æ—Ç—ã –≤–Ω—É—Ç—Ä–∏", "–ë—É–¥—Ç–æ —Å—Ç–µ–Ω–∞ –ø–µ—Ä–µ–¥–æ –º–Ω–æ–π"]}
]

# –ù–µ–≤–µ—Ä–±–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏
nonverbal_cues = [
    "(–ø–∞—É–∑–∞)",
    "(–≤–∑–¥—ã—Ö–∞–µ—Ç)",
    "(–≥–æ–ª–æ—Å –¥—Ä–æ–∂–∏—Ç)",
    "(–º–æ–ª—á–∏—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥)",
    "(—Ç–∏—Ö–∏–º –≥–æ–ª–æ—Å–æ–º)",
    "(—Å–º–æ—Ç—Ä–∏—Ç –≤–Ω–∏–∑)",
    "(–ø–µ—Ä–µ–≤–æ–¥–∏—Ç –¥—ã—Ö–∞–Ω–∏–µ)"
]

# –î–∏–∞–ª–æ–≥–∏ —Å —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ–º (–¥–ª—è –æ–±—É—á–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã–º —Å–ª—É—á–∞—è–º)
resistance_dialogues = [
    "–ü–∞—Ü–∏–µ–Ω—Ç: –í—ã –Ω–µ –º–æ–∂–µ—Ç–µ –º–µ–Ω—è –ø–æ–Ω—è—Ç—å.\n–ü—Å–∏—Ö–æ–ª–æ–≥: –í–æ–∑–º–æ–∂–Ω–æ. –ù–æ —è —Ö–æ—á—É –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å.",
    "–ü–∞—Ü–∏–µ–Ω—Ç: –≠—Ç–æ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ, –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—Å—è.\n–ü—Å–∏—Ö–æ–ª–æ–≥: –¢–∞–∫–∏–µ —á—É–≤—Å—Ç–≤–∞ –≤–æ–∑–Ω–∏–∫–∞—é—Ç, –∫–æ–≥–¥–∞ –º—ã —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å —á–µ–º-—Ç–æ –≤–∞–∂–Ω—ã–º.",
    "–ü–∞—Ü–∏–µ–Ω—Ç: –Ø –Ω–µ —Ö–æ—á—É –æ–± —ç—Ç–æ–º –≥–æ–≤–æ—Ä–∏—Ç—å.\n–ü—Å–∏—Ö–æ–ª–æ–≥: –£–≤–∞–∂–∞—é –≤–∞—à–µ –ø—Ä–∞–≤–æ –Ω–µ –≥–æ–≤–æ—Ä–∏—Ç—å. –ú–æ–∂–µ–º –ø—Ä–æ—Å—Ç–æ –ø–æ—Å–∏–¥–µ—Ç—å –≤ —Ç–∏—à–∏–Ω–µ.",
    "–ü–∞—Ü–∏–µ–Ω—Ç: –í—ã –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–∏—Ç–µ –º–æ–π –¥–µ–Ω—å–≥–∏.\n–ü—Å–∏—Ö–æ–ª–æ–≥: –ú–æ–≥—É –ø–æ–Ω—è—Ç—å —Ç–∞–∫–æ–µ –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–µ. –î–∞–≤–∞–π—Ç–µ –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ –≤–∞—à–∏—Ö –æ–∂–∏–¥–∞–Ω–∏—è—Ö.",
    "–ü–∞—Ü–∏–µ–Ω—Ç: –í—Å–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ.\n–ü—Å–∏—Ö–æ–ª–æ–≥: –ï—Å–ª–∏ —É –≤–∞—Å –±—ã–ª –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–π –æ–ø—ã—Ç, —ç—Ç–æ –≤–∞–∂–Ω–æ —É—á–µ—Å—Ç—å."
]

# ================= –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =================

def add_speech_pattern(text, pattern_type):
    """–î–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ—á–µ–≤—É—é –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –∫ —Ñ—Ä–∞–∑–µ"""
    patterns = [p for p in speech_patterns if p["type"] == pattern_type]
    if patterns:
        pattern = random.choice(patterns[0]["phrases"])
        # –° –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 50% –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–∞—á–∞–ª–æ, 50% –≤ –∫–æ–Ω–µ—Ü
        if random.random() > 0.5:
            return f"{pattern} {text}"
        else:
            return f"{text} {pattern}"
    return text

def add_nonverbal_cue(text):
    """–î–æ–±–∞–≤–ª—è–µ—Ç –Ω–µ–≤–µ—Ä–±–∞–ª—å–Ω—É—é —Ä–µ–∞–∫—Ü–∏—é"""
    cue = random.choice(nonverbal_cues)
    # –†–∞–∑–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ –¥–ª—è –Ω–µ–≤–µ—Ä–±–∞–ª—å–Ω—ã—Ö —Ä–µ–∞–∫—Ü–∏–π
    position = random.random()
    if position < 0.3:
        return f"{cue} {text}"
    elif position < 0.6:
        return f"{text} {cue}"
    else:
        # –í —Å–µ—Ä–µ–¥–∏–Ω–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
        words = text.split()
        if len(words) > 3:
            mid = len(words) // 2
            return " ".join(words[:mid] + [cue] + words[mid:])
    return text

def create_contextual_response(patient_phrase, empathy_level=2):
    """–°–æ–∑–¥–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç—É–∞–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç"""
    # –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑ —Ñ—Ä–∞–∑—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞
    keywords = re.findall(r'\b(?:–Ω–µ\s+)?[–∞-—è–ê-–Ø]{4,}\b', patient_phrase.lower())
    keywords = [k for k in keywords if k not in ['—ç—Ç–æ', '—á—Ç–æ', '–æ—á–µ–Ω—å', '–∫–∞–∫', '—Ç–∞–∫–æ–µ', '—Ç–∞–∫–æ–π', '—Ç–∞–∫–∏–µ']]
    
    empathy = random.choice(empathy_levels.get(empathy_level, empathy_levels[2]))
    
    if keywords and random.random() > 0.5:
        keyword = random.choice(keywords[:3])  # –ë–µ—Ä–µ–º –∏–∑ –ø–µ—Ä–≤—ã—Ö —Ç—Ä–µ—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
        question = random.choice([
            f"–ß—Ç–æ –¥–ª—è –≤–∞—Å –∑–Ω–∞—á–∏—Ç '{keyword}'?",
            f"–ö–æ–≥–¥–∞ –≤—ã –≥–æ–≤–æ—Ä–∏—Ç–µ –æ '{keyword}'...",
            f"–ö–∞–∫ '{keyword}' –ø—Ä–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –≤–∞—à–µ–π –∂–∏–∑–Ω–∏?",
            f"–ß—Ç–æ –≤—ã —á—É–≤—Å—Ç–≤—É–µ—Ç–µ, –∫–æ–≥–¥–∞ –¥—É–º–∞–µ—Ç–µ –æ '{keyword}'?"
        ])
        return f"{empathy}. {question}"
    else:
        question = random.choice(exploration_questions)
        return f"{empathy}. {question}"

def create_dialogue_structure():
    """–í—ã–±–∏—Ä–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∏–∞–ª–æ–≥–∞"""
    structures = [
        {"turns": 4, "pattern": "P-Ps-P-Ps"},  # –ü–∞—Ü–∏–µ–Ω—Ç-–ü—Å–∏—Ö–æ–ª–æ–≥-–ü–∞—Ü–∏–µ–Ω—Ç-–ü—Å–∏—Ö–æ–ª–æ–≥
        {"turns": 3, "pattern": "P-Ps-P"},      # –ü–∞—Ü–∏–µ–Ω—Ç-–ü—Å–∏—Ö–æ–ª–æ–≥-–ü–∞—Ü–∏–µ–Ω—Ç
        {"turns": 5, "pattern": "P-Ps-P-Ps-P"}, # –° –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –ø–æ–≤–æ—Ä–æ—Ç–æ–º
        {"turns": 4, "pattern": "P-Ps-Ps-P"},   # –î–≤–æ–π–Ω–æ–π –æ—Ç–≤–µ—Ç –ø—Å–∏—Ö–æ–ª–æ–≥–∞
    ]
    return random.choice(structures)

# ================= –°–û–ó–î–ê–ù–ò–ï –î–ò–ê–õ–û–ì–û–í =================

print("–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–∏–∞–ª–æ–≥–æ–≤...")
dia = int(input())
dialogues = []

print(f"\n–°–æ–∑–¥–∞—é {dia} –¥–∏–∞–ª–æ–≥–æ–≤...")

for i in range(1, dia + 1):
    # –í—ã–±–∏—Ä–∞–µ–º —Ç–µ–º—É –∏ –ø–æ–¥—Ç–µ–º—É
    topic = random.choice(list(deep_topics.keys()))
    subtopic = random.choice(deep_topics[topic])
    
    # –í—ã–±–∏—Ä–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    structure = create_dialogue_structure()
    
    dialogue_lines = []
    empathy_level = 1  # –ù–∞—á–∏–Ω–∞–µ–º —Å –±–∞–∑–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è
    
    # –§—Ä–∞–∑—ã –ø–∞—Ü–∏–µ–Ω—Ç–∞ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ)
    patient_opening_phrases = [
        f"–ß—É–≤—Å—Ç–≤—É—é –ø–æ—Å—Ç–æ—è–Ω–Ω—É—é {random.choice(['—Ç—Ä–µ–≤–æ–≥—É', '—É—Å—Ç–∞–ª–æ—Å—Ç—å', '–ø—É—Å—Ç–æ—Ç—É', '—Ç—è–∂–µ—Å—Ç—å'])}",
        f"–ù–µ –º–æ–≥—É {random.choice(['—Å–ø–∞—Ç—å', '—Ä–∞–±–æ—Ç–∞—Ç—å', '—Ä–∞–¥–æ–≤–∞—Ç—å—Å—è', '—Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è'])} –∫–∞–∫ —Ä–∞–Ω—å—à–µ",
        f"{random.choice(['–ë–æ—é—Å—å', '–°—Ç—Ä–∞–¥–∞—é –æ—Ç', '–ù–µ —Å–ø—Ä–∞–≤–ª—è—é—Å—å —Å', '–ó–∞—Å—Ç—Ä—è–ª –≤'])} {random.choice(['–±—É–¥—É—â–µ–≥–æ', '–æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–∞', '–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏', '–ø—Ä–æ—à–ª–æ–≥–æ'])}",
        f"–ü–æ—Ç–µ—Ä—è–ª {random.choice(['–∏–Ω—Ç–µ—Ä–µ—Å', '—Å–º—ã—Å–ª', '–Ω–∞–¥–µ–∂–¥—É', '–æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—é'])} –≤–æ –≤—Å—ë–º",
        f"–û—Ç–Ω–æ—à–µ–Ω–∏—è —Å {random.choice(['–ø–∞—Ä—Ç–Ω—ë—Ä–æ–º', '–∫–æ–ª–ª–µ–≥–∞–º–∏', '—Å–µ–º—å—ë–π', '–¥—Ä—É–∑—å—è–º–∏'])} —Å—Ç–∞–ª–∏ {random.choice(['–Ω–∞–ø—Ä—è–∂—ë–Ω–Ω—ã–º–∏', '–±–æ–ª–µ–∑–Ω–µ–Ω–Ω—ã–º–∏', '–¥–∞–ª—ë–∫–∏–º–∏', '–ø—É—Å—Ç—ã–º–∏'])}",
        f"–ú–µ–Ω—è –ø—Ä–µ—Å–ª–µ–¥—É–µ—Ç {random.choice(['—á—É–≤—Å—Ç–≤–æ –≤–∏–Ω—ã', '—Å—Ç—ã–¥', '—Å—Ç—Ä–∞—Ö –æ—Ç–≤–µ—Ä–∂–µ–Ω–∏—è', '–æ—â—É—â–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ—Å—Ç–∏'])}",
        f"–ù–µ –º–æ–≥—É {random.choice(['–ø—Ä–∏–Ω—è—Ç—å —Ä–µ—à–µ–Ω–∏–µ', '–ø–æ–Ω—è—Ç—å —Å–µ–±—è', '–Ω–∞–π—Ç–∏ –ø–æ–∫–æ–π', '–æ—Ç–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—à–ª–æ–µ'])}",
        f"–ß—É–≤—Å—Ç–≤—É—é —Å–µ–±—è {random.choice(['–∑–∞–ø–µ—Ä—Ç—ã–º –≤ –∫–ª–µ—Ç–∫–µ', '–ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–º –≤ —Ç—É–º–∞–Ω–µ', '–æ—Ç—Ä–µ–∑–∞–Ω–Ω—ã–º –æ—Ç –º–∏—Ä–∞', '–Ω–∞ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç–µ'])}"
    ]
    
    patient_followup_phrases = [
        f"–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—á–µ—Ä–∞ {random.choice(['–æ–ø—è—Ç—å –Ω–µ —Å–ø–∞–ª –≤—Å—é –Ω–æ—á—å', '–æ–ø–ª–∞–∫–∞–ª –≤–µ—Å—å –≤–µ—á–µ—Ä', '—Å–∏–¥–µ–ª –∏ —Å–º–æ—Ç—Ä–µ–ª –≤ —Å—Ç–µ–Ω—É', '—á—É—Ç—å –Ω–µ —Å–æ—Ä–≤–∞–ª—Å—è –Ω–∞ –±–ª–∏–∑–∫–∏—Ö'])}",
        f"–ö–∞–∂–µ—Ç—Å—è, —á—Ç–æ {random.choice(['–Ω–∏–∫—Ç–æ –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç', '—è –æ–¥–∏–Ω —Ç–∞–∫–æ–π', '—ç—Ç–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è', '—è —Å–æ–π–¥—É —Å —É–º–∞'])}",
        f"–ò–Ω–æ–≥–¥–∞ {random.choice(['—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –ª–µ–≥—á–µ', '–ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–±–ª–µ—Å–∫ –Ω–∞–¥–µ–∂–¥—ã', '–Ω–∞—Ö–æ–¥—è—Ç—Å—è —Å–∏–ª—ã –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å', '–ø—Ä–∏—Ö–æ–¥–∏—Ç –ø–æ–Ω–∏–º–∞–Ω–∏–µ'])}",
        f"–ë–æ—é—Å—å, —á—Ç–æ {random.choice(['—Ç–∞–∫ –∏ –æ—Å—Ç–∞–Ω—É—Å—å —Ç–∞–∫–∏–º', '–Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–∑–º–µ–Ω—é—Å—å', '–ø–æ—Ç–µ—Ä—è—é –≤—Å—ë', '–Ω–µ –≤—ã–¥–µ—Ä–∂—É —ç—Ç–æ–≥–æ'])}",
        f"–í –¥–µ—Ç—Å—Ç–≤–µ {random.choice(['—Ç–æ–∂–µ –±—ã–ª–æ —Å–ª–æ–∂–Ω–æ', '—É—á–∏–ª–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —ç–º–æ—Ü–∏–∏', '–Ω–µ –±—ã–ª–æ –ø–æ–¥–¥–µ—Ä–∂–∫–∏', '–ø—Ä–∏—Ö–æ–¥–∏–ª–æ—Å—å –±—ã—Ç—å —Å–∏–ª—å–Ω—ã–º'])}"
    ]
    
    # –°—Ç—Ä–æ–∏–º –¥–∏–∞–ª–æ–≥ —Å–æ–≥–ª–∞—Å–Ω–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ
    turn_count = 0
    pattern_chars = list(structure["pattern"].split('-'))
    
    for char in pattern_chars:
        turn_count += 1
        
        if char == 'P':  # –ü–∞—Ü–∏–µ–Ω—Ç
            if turn_count == 1:
                # –ü–µ—Ä–≤–∞—è —Ä–µ–ø–ª–∏–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–∞
                phrase = random.choice(patient_opening_phrases)
            else:
                # –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ–ø–ª–∏–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞
                phrase = random.choice(patient_followup_phrases)
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 40%
            if random.random() < 0.4:
                pattern_type = random.choice(["–æ–±—Ä—ã–≤—ã", "–ø–æ–≤—Ç–æ—Ä—ã", "–º–µ—Ç–∞—Ñ–æ—Ä—ã"])
                phrase = add_speech_pattern(phrase, pattern_type)
            
            # –î–æ–±–∞–≤–ª—è–µ–º –Ω–µ–≤–µ—Ä–±–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 30%
            if random.random() < 0.3:
                phrase = add_nonverbal_cue(phrase)
            
            # –î–æ–±–∞–≤–ª—è–µ–º –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ —Å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 20%
            if random.random() < 0.2 and not phrase.endswith("..."):
                phrase = phrase.rstrip('.') + "..."
            
            dialogue_lines.append(f"–ü–∞—Ü–∏–µ–Ω—Ç: {phrase}")
            
        elif char == 'Ps':  # –ü—Å–∏—Ö–æ–ª–æ–≥
            # –ü–æ–≤—ã—à–∞–µ–º —É—Ä–æ–≤–µ–Ω—å —ç–º–ø–∞—Ç–∏–∏ —Å –∫–∞–∂–¥—ã–º –æ—Ç–≤–µ—Ç–æ–º (–Ω–æ –Ω–µ –≤—ã—à–µ 3)
            empathy_level = min(3, empathy_level + random.randint(0, 1))
            
            if turn_count > 1 and dialogue_lines:
                # –ë–µ—Ä–µ–º –ø–æ—Å–ª–µ–¥–Ω—é—é —Ä–µ–ø–ª–∏–∫—É –ø–∞—Ü–∏–µ–Ω—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
                last_patient_line = dialogue_lines[-2] if len(dialogue_lines) >= 2 else dialogue_lines[-1]
                patient_text = last_patient_line.replace("–ü–∞—Ü–∏–µ–Ω—Ç: ", "")
                response = create_contextual_response(patient_text, empathy_level)
            else:
                empathy = random.choice(empathy_levels[empathy_level])
                question = random.choice(exploration_questions)
                response = f"{empathy}. {question}"
            
            dialogue_lines.append(f"–ü—Å–∏—Ö–æ–ª–æ–≥: {response}")
    
    # –°–æ–±–∏—Ä–∞–µ–º –¥–∏–∞–ª–æ–≥
    dialogue_text = "\n\n".join(dialogue_lines)
    
    # –° –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é 10% –¥–æ–±–∞–≤–ª—è–µ–º –¥–∏–∞–ª–æ–≥ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è
    if random.random() < 0.1:
        resistance = random.choice(resistance_dialogues)
        dialogue_text += f"\n\n{resistance}"
        structure["turns"] += 2
    
    dialogues.append({
        "id": i,
        "topic": topic,
        "subtopic": subtopic,
        "text": dialogue_text,
        "structure": structure["pattern"],
        "turns": structure["turns"],
        "empathy_level": empathy_level,
        "has_empathy": True,
        "has_questions": True,
        "created_at": datetime.now().isoformat()
    })
    
    if i % 10 == 0:
        print(f"   –°–æ–∑–¥–∞–Ω–æ {i} –¥–∏–∞–ª–æ–≥–æ–≤...")

# ================= –°–û–•–†–ê–ù–ï–ù–ò–ï =================

output_path = Path("C:/Files/processed_epitome/quality_psych_dialogues_enhanced.json")
output_path.parent.mkdir(parents=True, exist_ok=True)

with open(output_path, 'w', encoding='utf-8') as f:
    json.dump(dialogues, f, ensure_ascii=False, indent=2)

print(f"\n‚úÖ –°–û–ó–î–ê–ù–û {len(dialogues)} –£–õ–£–ß–®–ï–ù–ù–´–• –î–ò–ê–õ–û–ì–û–í")
print(f"üìÅ –§–∞–π–ª: {output_path}")

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
print(f"\nüìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê:")
topics_used = set([d['topic'] for d in dialogues])
print(f"   ‚Ä¢ –¢–µ–º—ã: {len(topics_used)} —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö")
print(f"   ‚Ä¢ –ü–æ–¥—Ç–µ–º—ã: {len(set([d['subtopic'] for d in dialogues]))} —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö")

total_chars = sum(len(d['text']) for d in dialogues)
avg_length = total_chars / len(dialogues)
print(f"   ‚Ä¢ –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞: {avg_length:.0f} —Å–∏–º–≤–æ–ª–æ–≤")

structures_used = set([d['structure'] for d in dialogues])
print(f"   ‚Ä¢ –°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏–∞–ª–æ–≥–æ–≤: {len(structures_used)} –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤")

turns_distribution = {}
for d in dialogues:
    turns = d['turns']
    turns_distribution[turns] = turns_distribution.get(turns, 0) + 1

print(f"   ‚Ä¢ –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –¥–ª–∏–Ω–µ:")
for turns, count in sorted(turns_distribution.items()):
    percentage = (count / len(dialogues)) * 100
    print(f"     - {turns} —Ä–µ–ø–ª–∏–∫: {count} –¥–∏–∞–ª–æ–≥–æ–≤ ({percentage:.1f}%)")

# –ü—Ä–∏–º–µ—Ä –¥–∏–∞–ª–æ–≥–∞
print(f"\nüìù –ü–†–ò–ú–ï–† –î–ò–ê–õ–û–ì–ê:")
sample = dialogues[0]
print(f"   –¢–µ–º–∞: {sample['topic']} ‚Üí {sample['subtopic']}")
print(f"   –°—Ç—Ä—É–∫—Ç—É—Ä–∞: {sample['structure']} ({sample['turns']} —Ä–µ–ø–ª–∏–∫)")
print(f"   –£—Ä–æ–≤–µ–Ω—å —ç–º–ø–∞—Ç–∏–∏: {sample['empathy_level']}/3")
print(f"   –¢–µ–∫—Å—Ç:\n{'-'*40}")
print(sample['text'][:300] + "..." if len(sample['text']) > 300 else sample['text'])
print(f"{'-'*40}")
